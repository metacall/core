version: '3.9'

services:
  deps:
    build:
      context: .
      dockerfile: tools/deps/Dockerfile
      platform:
        - linux/amd64
        - linux/arm64
    image: metacall/core:deps

  dev:
    build:
      context: .
      dockerfile: tools/dev/Dockerfile
      platform:
        - linux/amd64
        - linux/arm64
    image: metacall/core:dev

  runtime:
    build:
      context: .
      dockerfile: tools/runtime/Dockerfile
      platform:
        - linux/amd64
        - linux/arm64
    image: metacall/core:runtime

  cli:
    build:
      context: .
      dockerfile: tools/cli/Dockerfile
      platform:
        - linux/amd64
        - linux/arm64
    image: metacall/core:cli
